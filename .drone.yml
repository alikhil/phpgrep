kind: pipeline

steps:
  - image: golang:1.13
    name: install dependencies
    commands:
      - go get -t -v ./...

  - image: golang:1.13
    name: run go vet
    commands:
      - go vet .

  - image: golang:1.13
    name: test
    commands:
      - go test -v -race ./...

  - name: test webhook
    image: alikhil/webhook:1.0
    settings:
      url: https://api.telegram.org/bot1064394215:AAEvwEIHv1QL3jMeLQKSHHJOj-ndKJZE3TQ/sendMessage?chat_id=@drone_golang&text=hello%20world
      method: GET

  